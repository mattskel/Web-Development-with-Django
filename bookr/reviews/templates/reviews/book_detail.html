{% extends './base.html' %}

{% block content %}
<br>
<h1>Book details</h1>
<hr>
{% if book.cover %}
<img src="{{ book.cover.url }}">
<br>
{% endif %}
<span class="text-info">Title: </span> <span>{{ book.title }}</span>
<br>
<span class="text-info">Publisher: </span><span>{{ book.publisher }}</span>
<br>
<span class="text-info">Publication Date: </span><span>{{ book.publication_date }}</span>
<br>
{% if book.sample %}
    <span slass="text-info">Sample: </span><span><a href="{{ book.sample.url }}">Download</a></span>
    <br>
{% endif %}
<span class="text-info">Overall rating: </span><span class="badge badge-primary badge-pill">{{ overall_rating }}</span>
<br>

{% if not reviews %}
    {% if user.is_authenticated %}
    <hr>
    <h3>Be the first one to write a review.</h3>
    {% endif %}
{% else %}
    <hr>
    <h3>Review comments</h3>
    <ul>
    {% for review in reviews %}
        <li class="list-group-item">
            <span class="text-info">Review comment: </span><span>{{ review.content }}</span>
            <br>
            <span class="text-info">Created on:</span><span>{{ review.date_created }}</span>
            <br>
            <spam class="text-info">Modified on:</spam><span>{{ review.date_edited }}</span>
            <br>
            <span class="text-info">Rating: </span><span class="badge badge-secondary badge-pill">{{ review.rating }}</span>
            <br>
            <span class="text-info">Creator: </span><span>{{ review.creator.username }}</span>
            <br>
        </li>
        {% if user.is_staff or user.id == review.creator.id %}
        <a href="/books/{{ book.id }}/reviews/{{ review.id }}">Edit review</a>
        {% endif %}
    {% endfor %}
    </ul>
{% endif %}
{% if user.is_authenticated %}
<a class="btn btn-primary" href="/books/{{ book.id }}/reviews/new">Add review</a>
<a class="btn btn-primary" href="{% url 'media' book.pk %}">Media</a>
{% endif %}
{% endblock %}
